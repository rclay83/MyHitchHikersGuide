<!DOCTYPE html>
<html>
    <head>
        <title>G2G:No-Time</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='https://fonts.googleapis.com/css?family=Slabo+27px|Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="styles/styles.css">
    </head>
    <body>
        <nav>
            <div id="header"> <!--Page header row-->
                <img src="img/hamburger.svg" alt="hamburger"/>
                <h1><a href="index.html">Guide to the Galaxy</a></h1>
                <!--<div id="collapse-btn"><h3>Collapse all</h3></div>-->
            </div>
            <div id="side-bar-left">
                <ul>
                    <li><a href="#sprout-method">Sprout Method</a></li>
                    <li><a href="#sprout-class">Sprout Class</a></li>
                    <li><a href="#wrap-method">Wrap Method</a></li>
                    <li><a href="#wrap-class">Wrap Class</a></li>
                </ul>
            </div>
        </nav>
        <div class="container">
            <div class="row super-row">
                <div >
                    <h2 id="web">
                        Legacy Code "Not Enough Time"
                    </h2>
                </div>
                <ul>
                    <li>
                        <div class="title">
                            <h3 id="sprout-method" class="nav-point">Sprout Method</h3>
                        </div>
                        <p class="detail">
                            <b>Problem:</b> Need to insert new code in a location that is difficult to get under test for some given constraint and
                            new code can be encapsulated in a method. Giving up on testing calling code at the moment.
                        </p>
                        <h3>Algorithm:</h3>
                        <ol>
                            <li> Identify change location</li>
                            <li> If change can be formulated as method, write method call and comment out.</li>

                            <li> Visibility of new method can be set to package private</li>
                            <li> Old method and new logic can be tested using reflection (expensive?)</li>

                            <li> Pass local variables (if needed) as arguments</li>
                            <li> Assign return value to variable if needed.</li>
                            <li> Develop method using TDD</li>
                            <li> Remove comment</li>
                        </ol>

                    </li>
                    <li>
                        <div class="title">
                            <h3 id="sprout-class" class="nav-point">Sprout Class</h3>
                        </div>
                        <p class="detail">
                            Problem: Need to insert new code in a location that is difficult to get under test for some given constraint and
                            new code can be encapsulated in a method. Giving up on testing calling code at the moment.
                        </p>
                        <h3>Algorithm:</h3>
                        <ol>
                            <li> Identify change location</li>
                            <li> If change can be formulated as method, write method call and comment out.</li>

                            <li> Visibility of new method can be set to package private</li>
                            <li> Old method and new logic can be tested using reflection (expensive?)</li>

                            <li> Pass local variables (if needed) as arguments</li>
                            <li> Assign return value to variable if needed.</li>
                            <li> Develop method using TDD</li>
                            <li> Remove comment</li>
                        </ol>                        
                    </li>
                    <li>
                        <div class="title">
                            <h3 id="wrap-method" class="nav-point">Wrap Method</h3>
                        </div>
                        <p class="detail">
                            Useful when a new behavior needs to occur around the same time as an existing method invocation (temporal coupling)
                        </p>

                        <h3>Algorithm (re-name original method version):</h3>
                        <ol>
                            <li> Identify a method you need to change.</li>
                            <li> If the change can be formulated as a single sequence of statements in one place, rename the method and then create a new method with the same name and signature as the old method. Remember to Preserve Signatures(312)  as you do this.</li>
                            <li> Place a call to the old method in the new method</li>
                            <li> Develop a method for the new feature, using TDD, and call it from the new method</li>
                        </ol>
                        <h3>Algorithm (not yet used method version):</h3>
                        <ol>
                            <li> Identify a method you need to change.</li>
                            <li> If the change can be formulated as a single sequence of statements in one place, develop a new method for it using TDD</li>
                            <li> Create another method that calls the new method and the old method</li>
                        </ol>
                        <p><b>Note:</b> version 2 preserves the original method signature and allows both versions to be called.</p>

                        <h3>Advantages:</h3>
                        <ol>
                            <li> Explicitly makes new functionality independent of exiting functionality.</li>
                        </ol>
                        <h3>Disadvantages:</h3>
                        <ol> 
                            <li>Can lead to poor names after re-naming operations</li>
                            <li>New functionality must be able to be executed either before or after existing functionality. It cannot occur during the original functionality.</li>
                        </ol>
                    </li>
                    <li>
                        <div class="title">
                            <h3 id="wrap-class" class="nav-point">Wrap Class</h3>
                        </div>
                        <h3>Useful when:</h3>
                        <p class="detail">1. The behavior to add is completely independent, and you don't want to pollute the existing class with behavior that is low level or unrelated.</p>
                        <br>
                        <p>2. The class has grown so large that you don't want to make it worse. In a case like this, wrap just to put a stake in the ground and provide a roadmap for later changes.</p>

                        <h3>Algorithm:</h3>
                        <ol>
                            <li> Identify a method where you need to make a change.</li>
                            <li> If the change can be formulated as a single sequence of statements in one place, create a class that accepts the class you are going to wrap as a constructor argument. If yo have trouble creating a class that wraps the original class in a test harness, you might have to use Extract Implementer(356) or Extract Interface(362) on the wrapped class so that you can instantiate your wrapper.</li>
                            <li> Create a method on that class, using TDD, that does the new work. Write another method that calls the new method and the old method on  the wrapped class.</li>
                            <li> Instantiate the wrapper class in your code in the place where you need to enable the new behavior.</li>
                        </ol>
                </ul>
            </div>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="scripts/sidebar.js" type="text/javascript"></script>
</html>
